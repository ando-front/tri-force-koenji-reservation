# æœ¬ç•ªé‹ç”¨æ¤œè¨èª²é¡Œã¨è§£æ±ºæ¡ˆ

## ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

**ç¾çŠ¶è©•ä¾¡**: æœ¬ç•ªé‹ç”¨æº–å‚™åº¦ **3/10** - é‡å¤§ãªå•é¡Œã‚ã‚Š
**æ¨å¥¨**: ä»¥ä¸‹ã®æœ€é‡è¦èª²é¡Œï¼ˆP0ï¼‰ã‚’è§£æ±ºå¾Œã«ãƒ™ãƒ¼ã‚¿é‹ç”¨é–‹å§‹
**æƒ³å®šã‚³ã‚¹ãƒˆ**: æœˆé¡ **0å††**ï¼ˆç„¡æ–™æ å†…ã§é‹ç”¨å¯èƒ½ï¼‰
**æº–å‚™æœŸé–“**: æœ€çŸ­ **2é€±é–“**ï¼ˆãƒ—ãƒ­ãƒœãƒã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢æ™‚é–“ï¼šç´„20-30æ™‚é–“ï¼‰

---

## å‰ææ¡ä»¶ã®ç¢ºèª

### âœ… ä¸ä»¶
- **äºˆç®—**: ç„¡æ–™ã‚µãƒ¼ãƒ“ã‚¹ã®ã¿æ´»ç”¨ï¼ˆæœˆé¡0å††ç›®æ¨™ï¼‰
- **ç®¡ç†è€…**: éã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ãƒ“ã‚¸ãƒã‚¹ã‚ªãƒ¼ãƒŠãƒ¼
- **æŠ€è¡“ã‚µãƒãƒ¼ãƒˆ**: ãƒ—ãƒ­ãƒœãƒã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒçŸ­æ™‚é–“ã®ã¿å¯¾å¿œ
- **ã‚µãƒ¼ãƒ“ã‚¹ãƒ¬ãƒ™ãƒ«**: ãƒ™ã‚¹ãƒˆã‚¨ãƒ•ã‚©ãƒ¼ãƒˆå¯¾å¿œ
- **éšœå®³æ™‚å¯¾å¿œ**: ä»£æ›¿æ¥­å‹™ï¼ˆé›»è©±ãƒ»ãƒ¡ãƒ¼ãƒ«äºˆç´„ç­‰ï¼‰ã§é‹ç”¨

### âœ… ç¾åœ¨ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: GitHub Pagesï¼ˆç„¡æ–™ãƒ»é™çš„ã‚µã‚¤ãƒˆï¼‰
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: Google Apps Scriptï¼ˆç„¡æ–™ãƒ»ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ï¼‰
- **ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢**: Google Spreadsheetï¼ˆç„¡æ–™ï¼‰
- **ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼**: Google Calendarï¼ˆç„¡æ–™ï¼‰

---

## ğŸ“Š èª²é¡Œãƒãƒˆãƒªãƒƒã‚¯ã‚¹

| å„ªå…ˆåº¦ | èª²é¡Œã‚«ãƒ†ã‚´ãƒª | å½±éŸ¿åº¦ | è§£æ±ºå¿…é ˆ | æ¨å®šå·¥æ•° |
|--------|-------------|--------|----------|----------|
| **P0** | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ä¸æ­£åˆ©ç”¨å¯¾ç­– | è‡´å‘½çš„ | âœ… å¿…é ˆ | 8-12æ™‚é–“ |
| **P0** | éæŠ€è¡“è€…å‘ã‘ç®¡ç†ç”»é¢ | é«˜ | âœ… å¿…é ˆ | 6-8æ™‚é–“ |
| **P0** | è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— | é«˜ | âœ… å¿…é ˆ | 2-3æ™‚é–“ |
| **P1** | ã‚¨ãƒ©ãƒ¼ç›£è¦–ãƒ»é€šçŸ¥ | ä¸­ | ğŸ”¶ å¼·ãæ¨å¥¨ | 4-6æ™‚é–“ |
| **P1** | ãƒ‡ãƒ—ãƒ­ã‚¤è‡ªå‹•åŒ– | ä¸­ | ğŸ”¶ å¼·ãæ¨å¥¨ | 3-4æ™‚é–“ |
| **P2** | ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸å‘ä¸Š | ä½ | ğŸ“Œ æ¨å¥¨ | 8-10æ™‚é–“ |
| **P2** | ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ– | ä½ | ğŸ“Œ æ¨å¥¨ | 2-3æ™‚é–“ |

---

## ğŸš¨ P0: æœ€é‡è¦èª²é¡Œï¼ˆæœ¬ç•ªé‹ç”¨å‰ã«å¿…é ˆï¼‰

### 1. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ä¸æ­£åˆ©ç”¨å¯¾ç­–

#### ğŸ“‹ ç¾çŠ¶ã®å•é¡Œç‚¹
```
âŒ èªè¨¼ãªã— - èª°ã§ã‚‚ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
âŒ ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãªã— - ç„¡åˆ¶é™ã«äºˆç´„é€ä¿¡å¯èƒ½
âŒ Calendar IDãƒ»Script URLãŒå…¬é–‹ - ã‚¹ãƒ‘ãƒ æ”»æ’ƒå¯èƒ½
âŒ IPãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ãªã— - æ‚ªæ„ã‚ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç‰¹å®šä¸å¯
âŒ CAPTCHA ãªã— - Bot ã«ã‚ˆã‚‹è‡ªå‹•äºˆç´„å¯èƒ½
```

**ãƒªã‚¹ã‚¯ã‚·ãƒŠãƒªã‚ª**:
- æ‚ªæ„ã‚ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…¨æ™‚é–“å¸¯ã‚’äºˆç´„ã§åŸ‹ã‚ã‚‹
- Bot ãŒè‡ªå‹•ã§äºˆç´„ã‚’å¤§é‡é€ä¿¡ã—ã¦ã‚·ã‚¹ãƒ†ãƒ ãƒ€ã‚¦ãƒ³
- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãŒå¤–éƒ¨ã‹ã‚‰ã‚¹ãƒ‘ãƒ æŠ•ç¨¿ã•ã‚Œã‚‹

#### âœ… è§£æ±ºæ¡ˆï¼š3å±¤é˜²å¾¡ãƒ¢ãƒ‡ãƒ«ï¼ˆç„¡æ–™ï¼‰

##### **Layer 1: reCAPTCHA v3ï¼ˆGoogleæä¾›ãƒ»ç„¡æ–™ï¼‰**
```javascript
// public/index.html ã«è¿½åŠ 
<script src="https://www.google.com/recaptcha/api.js?render=YOUR_SITE_KEY"></script>

// é€ä¿¡æ™‚ã«ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—
grecaptcha.ready(function() {
  grecaptcha.execute('YOUR_SITE_KEY', {action: 'submit'}).then(function(token) {
    // ãƒ•ã‚©ãƒ¼ãƒ ã«è¿½åŠ ã—ã¦ã‚µãƒ¼ãƒãƒ¼å´ã§æ¤œè¨¼
    document.getElementById('recaptchaToken').value = token;
  });
});
```

**è¨­å®šæ‰‹é †**:
1. https://www.google.com/recaptcha/admin ã«ã‚¢ã‚¯ã‚»ã‚¹
2. reCAPTCHA v3 ã§æ–°ã—ã„ã‚µã‚¤ãƒˆã‚’ç™»éŒ²
3. ã‚µã‚¤ãƒˆã‚­ãƒ¼ã¨ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚­ãƒ¼ã‚’å–å¾—
4. GASå´ã§æ¤œè¨¼APIã‚’å®Ÿè£…

**å·¥æ•°**: 2-3æ™‚é–“
**ã‚³ã‚¹ãƒˆ**: ç„¡æ–™ï¼ˆæœˆ100ä¸‡ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¾ã§ï¼‰

---

##### **Layer 2: ãƒ¬ãƒ¼ãƒˆåˆ¶é™ï¼ˆGAS PropertiesServiceãƒ»ç„¡æ–™ï¼‰**
```javascript
// Code.js ã«è¿½åŠ 
function checkRateLimit(email) {
  const cache = CacheService.getScriptCache();
  const key = 'ratelimit_' + email;
  const count = cache.get(key);

  if (count && parseInt(count) >= 3) {
    throw new Error('é€ä¿¡å›æ•°ã®ä¸Šé™ã«é”ã—ã¾ã—ãŸã€‚30åˆ†å¾Œã«å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚');
  }

  // ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’å¢—ã‚„ã™ï¼ˆ30åˆ†ã§æœŸé™åˆ‡ã‚Œï¼‰
  cache.put(key, (parseInt(count) || 0) + 1, 1800);
}

function doPost(e) {
  const formData = parseFormData(e);

  // ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãƒã‚§ãƒƒã‚¯
  checkRateLimit(formData.ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹);

  // ... æ—¢å­˜ã®å‡¦ç† ...
}
```

**ãƒ«ãƒ¼ãƒ«**:
- åŒä¸€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹: 30åˆ†ä»¥å†…ã«3å›ã¾ã§
- åŒä¸€IPã‚¢ãƒ‰ãƒ¬ã‚¹: 1æ™‚é–“ä»¥å†…ã«10å›ã¾ã§ï¼ˆå¾Œè¿°ã®Cloudflareä½µç”¨æ™‚ï¼‰
- æ™‚é–“æ ã”ã¨ã®äºˆç´„ä¸Šé™ãƒã‚§ãƒƒã‚¯å¼·åŒ–

**å·¥æ•°**: 2-3æ™‚é–“
**ã‚³ã‚¹ãƒˆ**: ç„¡æ–™

---

##### **Layer 3: Cloudflareç„¡æ–™ãƒ—ãƒ©ãƒ³ï¼ˆDDoSä¿è­·ãƒ»ç„¡æ–™ï¼‰**
```bash
# è¨­å®šæ‰‹é †
1. https://www.cloudflare.com/ ã§ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
2. GitHub Pagesãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¿½åŠ 
3. DNSè¨­å®šã‚’å¤‰æ›´
4. Security Level: High ã«è¨­å®š
5. Rate Limiting ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ ï¼ˆç„¡æ–™ç‰ˆã¯3ãƒ«ãƒ¼ãƒ«ã¾ã§ï¼‰
```

**ç„¡æ–™ã§å¾—ã‚‰ã‚Œã‚‹ä¿è­·**:
- DDoSæ”»æ’ƒã‹ã‚‰ã®ä¿è­·
- Botç®¡ç†ï¼ˆç°¡æ˜“ç‰ˆï¼‰
- SSL/TLSæš—å·åŒ–
- åŸºæœ¬çš„ãªãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«

**å·¥æ•°**: 1-2æ™‚é–“
**ã‚³ã‚¹ãƒˆ**: ç„¡æ–™

---

##### **Layer 4: ç§˜å¯†æƒ…å ±ã®ç’°å¢ƒå¤‰æ•°åŒ–**
```javascript
// ç¾åœ¨ã®index.htmlã‹ã‚‰å‰Šé™¤ã™ã¹ãæƒ…å ±
âŒ Calendar ID ãŒHTMLã«ç›´æ¥è¨˜è¼‰
âŒ GAS Web App URL ãŒç›´æ¥è¨˜è¼‰

// è§£æ±ºç­–
âœ… GASå´ã§ã®ã¿Calendar IDã‚’ç®¡ç†
âœ… GitHub Pagesã¯ /api ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆçµŒç”±ã§ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹
âœ… CalendaråŸ‹ã‚è¾¼ã¿ã¯å…¬é–‹ç”¨ã®åˆ¥ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’ä½œæˆ
```

**å®Ÿè£…**:
```javascript
// PropertiesService ã«ç§»è¡Œ
const scriptProperties = PropertiesService.getScriptProperties();
scriptProperties.setProperty('CALENDAR_ID', 'your-calendar-id@group.calendar.google.com');
scriptProperties.setProperty('CALENDAR_ID_PUBLIC', 'public-view-only-calendar-id');
```

**å·¥æ•°**: 1æ™‚é–“
**ã‚³ã‚¹ãƒˆ**: ç„¡æ–™

---

#### ğŸ“Š ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ã¾ã¨ã‚

| å¯¾ç­– | é˜²å¾¡ã§ãã‚‹è„…å¨ | å·¥æ•° | ã‚³ã‚¹ãƒˆ |
|------|---------------|------|--------|
| reCAPTCHA v3 | Botè‡ªå‹•é€ä¿¡ | 2-3h | ç„¡æ–™ |
| ãƒ¬ãƒ¼ãƒˆåˆ¶é™ | ã‚¹ãƒ‘ãƒ ãƒ»é€£ç¶šé€ä¿¡ | 2-3h | ç„¡æ–™ |
| Cloudflare | DDoSãƒ»æ‚ªæ„ã‚ã‚‹ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ | 1-2h | ç„¡æ–™ |
| ç§˜å¯†æƒ…å ±ä¿è­· | æƒ…å ±æ¼æ´©ãƒ»ç›´æ¥æ”»æ’ƒ | 1h | ç„¡æ–™ |
| **åˆè¨ˆ** | | **6-9h** | **0å††** |

---

### 2. éæŠ€è¡“è€…å‘ã‘ç®¡ç†ç”»é¢

#### ğŸ“‹ ç¾çŠ¶ã®å•é¡Œç‚¹
```
âŒ äºˆç´„ç¢ºèªã«ã¯Spreadsheetã«ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹å¿…è¦
âŒ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã‹ã‚‰å®Ÿè¡Œ
âŒ ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã¯GASã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã—ã‹è¦‹ã‚Œãªã„
âŒ ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ãŒä¸æ˜ï¼ˆå‹•ã„ã¦ã„ã‚‹ã‹åˆ†ã‹ã‚‰ãªã„ï¼‰
âŒ äºˆç´„ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒ»å¤‰æ›´ã¯æ‰‹å‹•ã§ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆç·¨é›†
```

**éæŠ€è¡“è€…ã«ã¨ã£ã¦ã®èª²é¡Œ**:
- Spreadsheetã®æ•°å¼ã‚’å£Šã™ãƒªã‚¹ã‚¯
- GASã‚¨ãƒ‡ã‚£ã‚¿ã®æ“ä½œãŒé›£ã—ã„
- ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã«å¯¾å¿œã§ããªã„

#### âœ… è§£æ±ºæ¡ˆï¼šã‚·ãƒ³ãƒ—ãƒ«ãªç®¡ç†ç”»é¢ï¼ˆGAS Web Appãƒ»ç„¡æ–™ï¼‰

##### **å®Ÿè£…ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  admin.html (GAS Web App)           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ“Š ä»Šæ—¥ã®äºˆç´„ä¸€è¦§             â”‚  â”‚
â”‚  â”‚ ğŸ”” ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹: æ­£å¸¸         â”‚  â”‚
â”‚  â”‚ ğŸ’¾ æœ€çµ‚ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—: 2æ™‚é–“å‰  â”‚  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚ [ä»Šã™ããƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å®Ÿè¡Œ]      â”‚  â”‚
â”‚  â”‚ [äºˆç´„ä¸€è¦§ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰]      â”‚  â”‚
â”‚  â”‚ [é€±æ¬¡ãƒ¬ãƒãƒ¼ãƒˆé€ä¿¡]            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

##### **å®Ÿè£…ã‚³ãƒ¼ãƒ‰**
```javascript
// admin.gsï¼ˆæ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
function doGet(e) {
  const template = HtmlService.createTemplateFromFile('admin');

  // ä»Šæ—¥ã®äºˆç´„ã‚’å–å¾—
  template.todayReservations = getTodayReservations();

  // ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹
  template.systemStatus = checkSystemHealth();

  // æœ€çµ‚ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æ™‚åˆ»
  template.lastBackup = getLastBackupTime();

  return template.evaluate()
    .setTitle('Tri-force Koenji ç®¡ç†ç”»é¢')
    .addMetaTag('viewport', 'width=device-width, initial-scale=1');
}

// ä»Šæ—¥ã®äºˆç´„å–å¾—
function getTodayReservations() {
  const ss = SpreadsheetApp.openById(SPREADSHEET_ID);
  const sheet = ss.getSheetByName('ãƒ•ã‚©ãƒ¼ãƒ ã®å›ç­” 2');
  const data = sheet.getDataRange().getValues();

  const today = new Date();
  today.setHours(0, 0, 0, 0);

  const todayReservations = data.filter((row, index) => {
    if (index === 0) return false; // ãƒ˜ãƒƒãƒ€ãƒ¼é™¤å¤–
    const reservationDate = new Date(row[5]);
    reservationDate.setHours(0, 0, 0, 0);
    return reservationDate.getTime() === today.getTime();
  });

  return todayReservations.map(row => ({
    time: row[5],
    facility: row[2],
    name: row[3],
    email: row[1]
  }));
}

// ã‚·ã‚¹ãƒ†ãƒ ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
function checkSystemHealth() {
  try {
    // Spreadsheetã‚¢ã‚¯ã‚»ã‚¹ãƒ†ã‚¹ãƒˆ
    SpreadsheetApp.openById(SPREADSHEET_ID);

    // Calendarã‚¢ã‚¯ã‚»ã‚¹ãƒ†ã‚¹ãƒˆ
    CalendarApp.getCalendarById(CALENDAR_ID);

    return {
      status: 'healthy',
      message: 'ã‚·ã‚¹ãƒ†ãƒ ã¯æ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™',
      lastCheck: new Date()
    };
  } catch (error) {
    return {
      status: 'error',
      message: 'ã‚¨ãƒ©ãƒ¼: ' + error.message,
      lastCheck: new Date()
    };
  }
}

// ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å®Ÿè¡Œ
function executeBackup() {
  const ss = SpreadsheetApp.openById(SPREADSHEET_ID);
  const timestamp = Utilities.formatDate(new Date(), 'Asia/Tokyo', 'yyyyMMdd_HHmmss');
  const backup = ss.copy('äºˆç´„ãƒ‡ãƒ¼ã‚¿ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—_' + timestamp);

  // ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æ™‚åˆ»ã‚’è¨˜éŒ²
  PropertiesService.getScriptProperties().setProperty('LAST_BACKUP', new Date().toISOString());

  return {
    success: true,
    backupId: backup.getId(),
    timestamp: timestamp
  };
}

// é€±æ¬¡ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
function generateWeeklyReport() {
  const ss = SpreadsheetApp.openById(SPREADSHEET_ID);
  const sheet = ss.getSheetByName('ãƒ•ã‚©ãƒ¼ãƒ ã®å›ç­” 2');
  const data = sheet.getDataRange().getValues();

  const oneWeekAgo = new Date();
  oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);

  let report = {
    totalReservations: 0,
    fitnessCount: 0,
    freeMatCount: 0,
    peakHours: {}
  };

  data.forEach((row, index) => {
    if (index === 0) return;
    const date = new Date(row[5]);
    if (date >= oneWeekAgo) {
      report.totalReservations++;
      if (row[2] === 'ãƒ•ã‚£ãƒƒãƒˆãƒã‚¹') report.fitnessCount++;
      if (row[2] === 'ãƒ•ãƒªãƒ¼ãƒãƒƒãƒˆ') report.freeMatCount++;

      const hour = date.getHours();
      report.peakHours[hour] = (report.peakHours[hour] || 0) + 1;
    }
  });

  return report;
}
```

##### **admin.htmlï¼ˆç®¡ç†ç”»é¢UIï¼‰**
```html
<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tri-force Koenji ç®¡ç†ç”»é¢</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <style>
    body { padding: 20px; background: #f5f5f5; }
    .card { margin-bottom: 20px; }
    .status-healthy { color: #4caf50; }
    .status-error { color: #f44336; }
    .action-button { margin: 10px 5px; }
  </style>
</head>
<body>
  <div class="container">
    <h4>ğŸ“Š Tri-force Koenji ç®¡ç†ç”»é¢</h4>

    <!-- ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ -->
    <div class="card">
      <div class="card-content">
        <span class="card-title">ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹</span>
        <p class="<?= systemStatus.status === 'healthy' ? 'status-healthy' : 'status-error' ?>">
          <i class="material-icons">
            <?= systemStatus.status === 'healthy' ? 'check_circle' : 'error' ?>
          </i>
          <?= systemStatus.message ?>
        </p>
        <p><small>æœ€çµ‚ãƒã‚§ãƒƒã‚¯: <?= systemStatus.lastCheck ?></small></p>
      </div>
    </div>

    <!-- ä»Šæ—¥ã®äºˆç´„ -->
    <div class="card">
      <div class="card-content">
        <span class="card-title">ä»Šæ—¥ã®äºˆç´„ï¼ˆ<?= todayReservations.length ?>ä»¶ï¼‰</span>
        <? if (todayReservations.length === 0) { ?>
          <p>ä»Šæ—¥ã®äºˆç´„ã¯ã‚ã‚Šã¾ã›ã‚“</p>
        <? } else { ?>
          <table class="striped">
            <thead>
              <tr>
                <th>æ™‚é–“</th>
                <th>æ–½è¨­</th>
                <th>æ°å</th>
              </tr>
            </thead>
            <tbody>
              <? todayReservations.forEach(function(res) { ?>
                <tr>
                  <td><?= new Date(res.time).toLocaleTimeString('ja-JP', {hour: '2-digit', minute: '2-digit'}) ?></td>
                  <td><?= res.facility ?></td>
                  <td><?= res.name ?></td>
                </tr>
              <? }); ?>
            </tbody>
          </table>
        <? } ?>
      </div>
    </div>

    <!-- ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ -->
    <div class="card">
      <div class="card-content">
        <span class="card-title">ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</span>
        <p><small>æœ€çµ‚ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—: <?= lastBackup || 'æœªå®Ÿè¡Œ' ?></small></p>

        <button class="btn waves-effect waves-light action-button" onclick="executeBackupNow()">
          <i class="material-icons left">backup</i>ä»Šã™ããƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
        </button>

        <button class="btn waves-effect waves-light action-button" onclick="downloadReservations()">
          <i class="material-icons left">download</i>äºˆç´„ãƒ‡ãƒ¼ã‚¿DL
        </button>

        <button class="btn waves-effect waves-light action-button" onclick="sendWeeklyReport()">
          <i class="material-icons left">email</i>é€±æ¬¡ãƒ¬ãƒãƒ¼ãƒˆé€ä¿¡
        </button>

        <a href="https://docs.google.com/spreadsheets/d/SPREADSHEET_ID" target="_blank" class="btn-flat">
          ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‚’é–‹ã
        </a>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <script>
    function executeBackupNow() {
      M.toast({html: 'ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å®Ÿè¡Œä¸­...'});
      google.script.run
        .withSuccessHandler(function(result) {
          M.toast({html: 'ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãŒå®Œäº†ã—ã¾ã—ãŸï¼', classes: 'green'});
          location.reload();
        })
        .withFailureHandler(function(error) {
          M.toast({html: 'ã‚¨ãƒ©ãƒ¼: ' + error.message, classes: 'red'});
        })
        .executeBackup();
    }

    function downloadReservations() {
      window.open('https://docs.google.com/spreadsheets/d/SPREADSHEET_ID/export?format=csv', '_blank');
    }

    function sendWeeklyReport() {
      M.toast({html: 'ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆä¸­...'});
      google.script.run
        .withSuccessHandler(function(result) {
          M.toast({html: 'ãƒ¬ãƒãƒ¼ãƒˆã‚’ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã—ã¾ã—ãŸ', classes: 'green'});
        })
        .withFailureHandler(function(error) {
          M.toast({html: 'ã‚¨ãƒ©ãƒ¼: ' + error.message, classes: 'red'});
        })
        .generateAndSendWeeklyReport();
    }
  </script>
</body>
</html>
```

##### **ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ï¼ˆé‡è¦ï¼‰**
```javascript
// ç®¡ç†ç”»é¢ã¯ç‰¹å®šã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
function doGet(e) {
  const user = Session.getActiveUser().getEmail();
  const allowedAdmins = PropertiesService.getScriptProperties()
    .getProperty('ADMIN_EMAILS')
    .split(',');

  if (!allowedAdmins.includes(user)) {
    return HtmlService.createHtmlOutput('<h1>ã‚¢ã‚¯ã‚»ã‚¹æ‹’å¦</h1><p>ç®¡ç†è€…æ¨©é™ãŒå¿…è¦ã§ã™</p>');
  }

  // ... ç®¡ç†ç”»é¢è¡¨ç¤º ...
}
```

**å·¥æ•°**: 6-8æ™‚é–“
**ã‚³ã‚¹ãƒˆ**: ç„¡æ–™

---

### 3. è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚·ã‚¹ãƒ†ãƒ 

#### ğŸ“‹ ç¾çŠ¶ã®å•é¡Œç‚¹
```
âŒ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¯æ‰‹å‹•å®Ÿè¡Œã®ã¿
âŒ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®å®Ÿè¡Œå¿˜ã‚Œãƒªã‚¹ã‚¯
âŒ ãƒªã‚¹ãƒˆã‚¢æ‰‹é †ãŒæœªæ¤œè¨¼
âŒ ä¸–ä»£ç®¡ç†ãªã—
âŒ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆåŠŸ/å¤±æ•—ã®é€šçŸ¥ãªã—
```

#### âœ… è§£æ±ºæ¡ˆï¼šTime-driven Triggerï¼ˆGASãƒ»ç„¡æ–™ï¼‰

```javascript
// backup.gsï¼ˆæ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

// æ—¥æ¬¡è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼ˆæ¯æ—¥åˆå‰2æ™‚å®Ÿè¡Œï¼‰
function scheduledDailyBackup() {
  try {
    const result = createBackup('daily');

    // æˆåŠŸé€šçŸ¥
    sendBackupNotification(result, 'success');

    // å¤ã„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®å‰Šé™¤ï¼ˆ30æ—¥ä»¥ä¸Šå‰ï¼‰
    cleanupOldBackups(30);

  } catch (error) {
    // å¤±æ•—é€šçŸ¥
    sendBackupNotification({ error: error.message }, 'failure');
  }
}

// ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ
function createBackup(type) {
  const ss = SpreadsheetApp.openById(
    PropertiesService.getScriptProperties().getProperty('SPREADSHEET_ID')
  );

  const timestamp = Utilities.formatDate(new Date(), 'Asia/Tokyo', 'yyyyMMdd_HHmmss');
  const backupName = `äºˆç´„ãƒ‡ãƒ¼ã‚¿ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—_${type}_${timestamp}`;

  // ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‚’ã‚³ãƒ”ãƒ¼
  const backup = ss.copy(backupName);

  // ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ•ã‚©ãƒ«ãƒ€ã«ç§»å‹•
  const backupFolder = getOrCreateBackupFolder();
  const file = DriveApp.getFileById(backup.getId());
  file.moveTo(backupFolder);

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’è¨˜éŒ²
  const metadata = {
    backupId: backup.getId(),
    timestamp: new Date().toISOString(),
    type: type,
    originalId: ss.getId()
  };

  PropertiesService.getScriptProperties().setProperty(
    'LAST_BACKUP_' + type.toUpperCase(),
    JSON.stringify(metadata)
  );

  return metadata;
}

// ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ•ã‚©ãƒ«ãƒ€ã®å–å¾—ã¾ãŸã¯ä½œæˆ
function getOrCreateBackupFolder() {
  const folderName = 'Tri-forceäºˆç´„ã‚·ã‚¹ãƒ†ãƒ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—';
  const folders = DriveApp.getFoldersByName(folderName);

  if (folders.hasNext()) {
    return folders.next();
  } else {
    return DriveApp.createFolder(folderName);
  }
}

// å¤ã„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®å‰Šé™¤
function cleanupOldBackups(daysToKeep) {
  const folder = getOrCreateBackupFolder();
  const files = folder.getFiles();
  const cutoffDate = new Date();
  cutoffDate.setDate(cutoffDate.getDate() - daysToKeep);

  let deletedCount = 0;

  while (files.hasNext()) {
    const file = files.next();
    if (file.getDateCreated() < cutoffDate) {
      file.setTrashed(true);
      deletedCount++;
    }
  }

  Logger.log(`${deletedCount}å€‹ã®å¤ã„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å‰Šé™¤ã—ã¾ã—ãŸ`);
  return deletedCount;
}

// ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—é€šçŸ¥é€ä¿¡
function sendBackupNotification(result, status) {
  const adminEmail = PropertiesService.getScriptProperties().getProperty('ADMIN_EMAIL');

  if (!adminEmail) {
    Logger.log('ç®¡ç†è€…ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“');
    return;
  }

  let subject, body;

  if (status === 'success') {
    subject = 'âœ… Tri-forceäºˆç´„ã‚·ã‚¹ãƒ†ãƒ  - ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆåŠŸ';
    body = `
ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãŒæ­£å¸¸ã«å®Œäº†ã—ã¾ã—ãŸã€‚

ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ID: ${result.backupId}
å®Ÿè¡Œæ™‚åˆ»: ${result.timestamp}
ç¨®é¡: ${result.type}

ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¯ä»¥ä¸‹ã®ãƒ•ã‚©ãƒ«ãƒ€ã«ä¿å­˜ã•ã‚Œã¦ã„ã¾ã™ï¼š
https://drive.google.com/drive/folders/[FOLDER_ID]

â€»ã“ã®ãƒ¡ãƒ¼ãƒ«ã¯è‡ªå‹•é€ä¿¡ã•ã‚Œã¦ã„ã¾ã™
    `;
  } else {
    subject = 'âŒ Tri-forceäºˆç´„ã‚·ã‚¹ãƒ†ãƒ  - ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å¤±æ•—';
    body = `
ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãŒå¤±æ•—ã—ã¾ã—ãŸã€‚è‡³æ€¥ç¢ºèªã—ã¦ãã ã•ã„ã€‚

ã‚¨ãƒ©ãƒ¼å†…å®¹: ${result.error}
ç™ºç”Ÿæ™‚åˆ»: ${new Date().toISOString()}

å¯¾å¿œãŒå¿…è¦ã§ã™ã€‚ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…ã«é€£çµ¡ã—ã¦ãã ã•ã„ã€‚

â€»ã“ã®ãƒ¡ãƒ¼ãƒ«ã¯è‡ªå‹•é€ä¿¡ã•ã‚Œã¦ã„ã¾ã™
    `;
  }

  MailApp.sendEmail({
    to: adminEmail,
    subject: subject,
    body: body
  });
}

// ãƒªã‚¹ãƒˆã‚¢æ©Ÿèƒ½ï¼ˆç·Šæ€¥æ™‚ç”¨ï¼‰
function restoreFromBackup(backupId) {
  try {
    const backup = SpreadsheetApp.openById(backupId);
    const currentSsId = PropertiesService.getScriptProperties().getProperty('SPREADSHEET_ID');
    const currentSs = SpreadsheetApp.openById(currentSsId);

    // ç¾åœ¨ã®ã‚·ãƒ¼ãƒˆã‚’ä¸€æ™‚çš„ã«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
    const emergencyBackup = currentSs.copy('ç·Šæ€¥é€€é¿_' + new Date().getTime());

    // ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å¾©å…ƒ
    const backupSheet = backup.getSheetByName('ãƒ•ã‚©ãƒ¼ãƒ ã®å›ç­” 2');
    const currentSheet = currentSs.getSheetByName('ãƒ•ã‚©ãƒ¼ãƒ ã®å›ç­” 2');

    const data = backupSheet.getDataRange().getValues();
    currentSheet.clear();
    currentSheet.getRange(1, 1, data.length, data[0].length).setValues(data);

    return {
      success: true,
      restoredFrom: backupId,
      emergencyBackupId: emergencyBackup.getId()
    };

  } catch (error) {
    Logger.log('ãƒªã‚¹ãƒˆã‚¢ã‚¨ãƒ©ãƒ¼: ' + error);
    throw new Error('ãƒªã‚¹ãƒˆã‚¢ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error.message);
  }
}
```

##### **ãƒˆãƒªã‚¬ãƒ¼è¨­å®šæ‰‹é †ï¼ˆç®¡ç†è€…ãŒå®Ÿè¡Œï¼‰**
```javascript
// setup.gsï¼ˆåˆæœŸè¨­å®šç”¨ï¼‰
function setupBackupTriggers() {
  // æ—¢å­˜ã®ãƒˆãƒªã‚¬ãƒ¼ã‚’å‰Šé™¤
  const triggers = ScriptApp.getProjectTriggers();
  triggers.forEach(trigger => {
    if (trigger.getHandlerFunction() === 'scheduledDailyBackup') {
      ScriptApp.deleteTrigger(trigger);
    }
  });

  // æ—¥æ¬¡ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒˆãƒªã‚¬ãƒ¼ï¼ˆæ¯æ—¥åˆå‰2æ™‚ï¼‰
  ScriptApp.newTrigger('scheduledDailyBackup')
    .timeBased()
    .atHour(2)
    .everyDays(1)
    .create();

  Logger.log('ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒˆãƒªã‚¬ãƒ¼ã‚’è¨­å®šã—ã¾ã—ãŸ');
}
```

**å®Ÿè¡Œæ–¹æ³•ï¼ˆéæŠ€è¡“è€…å‘ã‘æ‰‹é †æ›¸ï¼‰**:
```
1. GASã‚¨ãƒ‡ã‚£ã‚¿ã‚’é–‹ã
2. å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ã€Œãƒˆãƒªã‚¬ãƒ¼ã€ï¼ˆæ™‚è¨ˆã‚¢ã‚¤ã‚³ãƒ³ï¼‰ã‚’ã‚¯ãƒªãƒƒã‚¯
3. å³ä¸‹ã®ã€Œãƒˆãƒªã‚¬ãƒ¼ã‚’è¿½åŠ ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
4. ä»¥ä¸‹ã‚’è¨­å®š:
   - å®Ÿè¡Œã™ã‚‹é–¢æ•°: scheduledDailyBackup
   - ã‚¤ãƒ™ãƒ³ãƒˆã®ã‚½ãƒ¼ã‚¹: æ™‚é–“ä¸»å°å‹
   - æ™‚åˆ»ãƒ™ãƒ¼ã‚¹ã®ãƒˆãƒªã‚¬ãƒ¼: æ—¥ã‚¿ã‚¤ãƒãƒ¼
   - æ™‚åˆ»: åˆå‰2æ™‚ï½3æ™‚
5. ã€Œä¿å­˜ã€ã‚’ã‚¯ãƒªãƒƒã‚¯

â€» åˆå›ã®ã¿æ¨©é™ã®æ‰¿èªãŒå¿…è¦ã§ã™
```

##### **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆ¦ç•¥**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“… æ—¥æ¬¡: æ¯æ—¥åˆå‰2æ™‚                â”‚
â”‚ ğŸ’¾ ä¿æŒæœŸé–“: 30æ—¥é–“                 â”‚
â”‚ ğŸ—‘ï¸  è‡ªå‹•å‰Šé™¤: 30æ—¥ä»¥ä¸Šå‰ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—â”‚
â”‚ ğŸ“§ é€šçŸ¥: æˆåŠŸ/å¤±æ•—ã‚’ãƒ¡ãƒ¼ãƒ«ã§å ±å‘Š     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å·¥æ•°**: 2-3æ™‚é–“
**ã‚³ã‚¹ãƒˆ**: ç„¡æ–™

---

## ğŸ”¶ P1: å¼·ãæ¨å¥¨ã™ã‚‹èª²é¡Œ

### 4. ã‚¨ãƒ©ãƒ¼ç›£è¦–ãƒ»é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 

#### ğŸ“‹ ç¾çŠ¶ã®å•é¡Œç‚¹
```
âŒ ã‚¨ãƒ©ãƒ¼ã¯GASãƒ­ã‚°ã«ã®ã¿è¨˜éŒ²ï¼ˆ30æ—¥ã§æ¶ˆå¤±ï¼‰
âŒ ç®¡ç†è€…ã¯ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿã«æ°—ã¥ã‘ãªã„
âŒ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®å•ã„åˆã‚ã›ã§åˆã‚ã¦éšœå®³ã‚’èªè­˜
âŒ ã‚¨ãƒ©ãƒ¼ã®å‚¾å‘åˆ†æãŒã§ããªã„
```

#### âœ… è§£æ±ºæ¡ˆï¼šè»½é‡ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ï¼ˆç„¡æ–™ï¼‰

##### **å®Ÿè£…ï¼šã‚¨ãƒ©ãƒ¼ãƒ­ã‚®ãƒ³ã‚°ï¼‹æ—¥æ¬¡ã‚µãƒãƒªãƒ¼**
```javascript
// monitoring.gsï¼ˆæ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

// ã‚¨ãƒ©ãƒ¼ã‚’Spreadsheetã«è¨˜éŒ²
function logError(errorType, errorMessage, context) {
  try {
    const ss = SpreadsheetApp.openById(
      PropertiesService.getScriptProperties().getProperty('SPREADSHEET_ID')
    );

    // ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚·ãƒ¼ãƒˆã‚’å–å¾—ã¾ãŸã¯ä½œæˆ
    let errorSheet = ss.getSheetByName('ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°');
    if (!errorSheet) {
      errorSheet = ss.insertSheet('ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°');
      errorSheet.appendRow([
        'ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—',
        'ã‚¨ãƒ©ãƒ¼ç¨®åˆ¥',
        'ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸',
        'ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ',
        'ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒ¼ãƒ«'
      ]);
    }

    errorSheet.appendRow([
      new Date(),
      errorType,
      errorMessage,
      JSON.stringify(context),
      context.email || 'N/A'
    ]);

    // é‡å¤§ã‚¨ãƒ©ãƒ¼ã®å ´åˆã¯å³åº§ã«é€šçŸ¥
    if (errorType === 'CRITICAL') {
      sendImmediateAlert(errorType, errorMessage, context);
    }

  } catch (e) {
    // ãƒ­ã‚®ãƒ³ã‚°è‡ªä½“ãŒå¤±æ•—ã—ãŸå ´åˆ
    Logger.log('ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°è¨˜éŒ²å¤±æ•—: ' + e.message);
  }
}

// doPost ã«ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’è¿½åŠ 
function doPost(e) {
  try {
    const formData = parseFormData(e);

    // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    const validationResult = validateFormData(formData);
    if (!validationResult.valid) {
      logError('VALIDATION', validationResult.message, { formData });
      return showMessage(validationResult.message, 'deep-orange');
    }

    // ... äºˆç´„å‡¦ç† ...

  } catch (error) {
    // äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼
    logError('CRITICAL', error.message, {
      stack: error.stack,
      formData: formData
    });

    return showMessage(
      'äºˆç´„å‡¦ç†ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ç®¡ç†è€…ã«é€£çµ¡ã—ã¦ãã ã•ã„ã€‚',
      'deep-orange'
    );
  }
}

// æ—¥æ¬¡ã‚¨ãƒ©ãƒ¼ã‚µãƒãƒªãƒ¼é€ä¿¡ï¼ˆæ¯æœ8æ™‚å®Ÿè¡Œï¼‰
function sendDailyErrorSummary() {
  const ss = SpreadsheetApp.openById(
    PropertiesService.getScriptProperties().getProperty('SPREADSHEET_ID')
  );

  const errorSheet = ss.getSheetByName('ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°');
  if (!errorSheet) {
    return; // ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚·ãƒ¼ãƒˆãŒãªã‘ã‚Œã°ã‚¹ã‚­ãƒƒãƒ—
  }

  const data = errorSheet.getDataRange().getValues();
  const yesterday = new Date();
  yesterday.setDate(yesterday.getDate() - 1);
  yesterday.setHours(0, 0, 0, 0);

  const todayErrors = data.filter((row, index) => {
    if (index === 0) return false; // ãƒ˜ãƒƒãƒ€ãƒ¼
    const errorDate = new Date(row[0]);
    errorDate.setHours(0, 0, 0, 0);
    return errorDate >= yesterday;
  });

  if (todayErrors.length === 0) {
    // ã‚¨ãƒ©ãƒ¼ãªã— - æ­£å¸¸ç¨¼åƒãƒ¬ãƒãƒ¼ãƒˆ
    sendHealthReport();
    return;
  }

  // ã‚¨ãƒ©ãƒ¼ã‚µãƒãƒªãƒ¼ã‚’é›†è¨ˆ
  const summary = {
    total: todayErrors.length,
    critical: todayErrors.filter(row => row[1] === 'CRITICAL').length,
    validation: todayErrors.filter(row => row[1] === 'VALIDATION').length,
    other: todayErrors.filter(row => !['CRITICAL', 'VALIDATION'].includes(row[1])).length
  };

  const adminEmail = PropertiesService.getScriptProperties().getProperty('ADMIN_EMAIL');

  MailApp.sendEmail({
    to: adminEmail,
    subject: `ğŸ“Š Tri-forceäºˆç´„ã‚·ã‚¹ãƒ†ãƒ  - æ—¥æ¬¡ãƒ¬ãƒãƒ¼ãƒˆï¼ˆã‚¨ãƒ©ãƒ¼${summary.total}ä»¶ï¼‰`,
    body: `
éå»24æ™‚é–“ã®ã‚·ã‚¹ãƒ†ãƒ ãƒ¬ãƒãƒ¼ãƒˆ

ã€ã‚¨ãƒ©ãƒ¼ã‚µãƒãƒªãƒ¼ã€‘
ãƒ»åˆè¨ˆã‚¨ãƒ©ãƒ¼æ•°: ${summary.total}ä»¶
ãƒ»é‡å¤§ã‚¨ãƒ©ãƒ¼: ${summary.critical}ä»¶ ${summary.critical > 0 ? 'âš ï¸ è¦ç¢ºèª' : ''}
ãƒ»ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼: ${summary.validation}ä»¶
ãƒ»ãã®ä»–: ${summary.other}ä»¶

ã€è©³ç´°ã€‘
${todayErrors.slice(0, 5).map(row =>
  `- ${row[0]} [${row[1]}] ${row[2]}`
).join('\n')}

${todayErrors.length > 5 ? `\n... ä»–${todayErrors.length - 5}ä»¶\n` : ''}

è©³ç´°ã¯ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚·ãƒ¼ãƒˆã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š
https://docs.google.com/spreadsheets/d/${ss.getId()}/edit#gid=${errorSheet.getSheetId()}

â€»ã“ã®ãƒ¡ãƒ¼ãƒ«ã¯è‡ªå‹•é€ä¿¡ã•ã‚Œã¦ã„ã¾ã™
    `
  });
}

// æ­£å¸¸ç¨¼åƒãƒ¬ãƒãƒ¼ãƒˆ
function sendHealthReport() {
  const adminEmail = PropertiesService.getScriptProperties().getProperty('ADMIN_EMAIL');

  MailApp.sendEmail({
    to: adminEmail,
    subject: 'âœ… Tri-forceäºˆç´„ã‚·ã‚¹ãƒ†ãƒ  - æ—¥æ¬¡ãƒ¬ãƒãƒ¼ãƒˆï¼ˆæ­£å¸¸ç¨¼åƒï¼‰',
    body: `
éå»24æ™‚é–“ã®ã‚·ã‚¹ãƒ†ãƒ ãƒ¬ãƒãƒ¼ãƒˆ

ã‚·ã‚¹ãƒ†ãƒ ã¯æ­£å¸¸ã«ç¨¼åƒã—ã¦ã„ã¾ã™ã€‚
ã‚¨ãƒ©ãƒ¼ã¯ç™ºç”Ÿã—ã¦ã„ã¾ã›ã‚“ã€‚

â€»ã“ã®ãƒ¡ãƒ¼ãƒ«ã¯è‡ªå‹•é€ä¿¡ã•ã‚Œã¦ã„ã¾ã™
    `
  });
}

// å³åº§ã«ã‚¢ãƒ©ãƒ¼ãƒˆï¼ˆé‡å¤§ã‚¨ãƒ©ãƒ¼æ™‚ï¼‰
function sendImmediateAlert(errorType, errorMessage, context) {
  const adminEmail = PropertiesService.getScriptProperties().getProperty('ADMIN_EMAIL');

  MailApp.sendEmail({
    to: adminEmail,
    subject: 'ğŸš¨ [ç·Šæ€¥] Tri-forceäºˆç´„ã‚·ã‚¹ãƒ†ãƒ  - é‡å¤§ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ',
    body: `
é‡å¤§ãªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚è‡³æ€¥ç¢ºèªã—ã¦ãã ã•ã„ã€‚

ã€ã‚¨ãƒ©ãƒ¼å†…å®¹ã€‘
${errorMessage}

ã€ç™ºç”Ÿæ™‚åˆ»ã€‘
${new Date()}

ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã€‘
${JSON.stringify(context, null, 2)}

ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…ã«é€£çµ¡ã—ã¦ãã ã•ã„ã€‚

â€»ã“ã®ãƒ¡ãƒ¼ãƒ«ã¯è‡ªå‹•é€ä¿¡ã•ã‚Œã¦ã„ã¾ã™
    `
  });
}
```

##### **ãƒˆãƒªã‚¬ãƒ¼è¨­å®š**
```javascript
function setupMonitoringTriggers() {
  // æ—¥æ¬¡ã‚¨ãƒ©ãƒ¼ã‚µãƒãƒªãƒ¼ï¼ˆæ¯æœ8æ™‚ï¼‰
  ScriptApp.newTrigger('sendDailyErrorSummary')
    .timeBased()
    .atHour(8)
    .everyDays(1)
    .create();
}
```

##### **å¤–éƒ¨ç›£è¦–ãƒ„ãƒ¼ãƒ«ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ãƒ»ç„¡æ–™ï¼‰**

**UptimeRobotï¼ˆç„¡æ–™ãƒ—ãƒ©ãƒ³ï¼‰**
```
æ©Ÿèƒ½:
- 5åˆ†é–“éš”ã§HTTPãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
- ãƒ€ã‚¦ãƒ³æ™‚ã«ãƒ¡ãƒ¼ãƒ«é€šçŸ¥
- æœˆé–“50ãƒ¢ãƒ‹ã‚¿ãƒ¼ã¾ã§ç„¡æ–™
- ç¨¼åƒç‡ã®çµ±è¨ˆ

è¨­å®šæ‰‹é †:
1. https://uptimerobot.com/ ã§ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
2. "Add New Monitor"
3. Monitor Type: HTTP(s)
4. URL: [GAS Web App URL]
5. Alert Contacts: ç®¡ç†è€…ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
```

**å·¥æ•°**: 4-6æ™‚é–“
**ã‚³ã‚¹ãƒˆ**: ç„¡æ–™

---

### 5. ãƒ‡ãƒ—ãƒ­ã‚¤è‡ªå‹•åŒ–ï¼ˆCI/CDï¼‰

#### ğŸ“‹ ç¾çŠ¶ã®å•é¡Œç‚¹
```
âŒ ãƒ‡ãƒ—ãƒ­ã‚¤ã¯CLASPã‚³ãƒãƒ³ãƒ‰æ‰‹å‹•å®Ÿè¡Œ
âŒ æœ¬ç•ªç’°å¢ƒã¨é–‹ç™ºç’°å¢ƒã®åŒºåˆ¥ãŒæ›–æ˜§
âŒ ãƒ‡ãƒ—ãƒ­ã‚¤å‰ã®ãƒ†ã‚¹ãƒˆå®Ÿè¡ŒãŒä¿è¨¼ã•ã‚Œãªã„
âŒ ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †ãŒæœªå®šç¾©
```

#### âœ… è§£æ±ºæ¡ˆï¼šGitHub Actionsï¼ˆç„¡æ–™ï¼‰

##### **å®Ÿè£…ï¼šè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³**
```yaml
# .github/workflows/deploy.yml
name: Deploy to Production

on:
  push:
    branches:
      - main
  workflow_dispatch: # æ‰‹å‹•å®Ÿè¡Œã‚‚å¯èƒ½

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: Run linter
        run: npm run lint

      - name: Run tests
        run: npm test

  deploy:
    needs: test
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'

    steps:
      - uses: actions/checkout@v3

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: Build
        run: npm run build

      - name: Setup CLASP
        run: |
          npm install -g @google/clasp
          echo "$CLASP_CREDENTIALS" > ~/.clasprc.json
        env:
          CLASP_CREDENTIALS: ${{ secrets.CLASP_CREDENTIALS }}

      - name: Deploy to GAS
        run: |
          cp .clasp-prod.json .clasp.json
          clasp push --force

      - name: Create GitHub Release
        uses: actions/create-release@v1
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          tag_name: v${{ github.run_number }}
          release_name: Release v${{ github.run_number }}
          body: |
            è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†
            ã‚³ãƒŸãƒƒãƒˆ: ${{ github.sha }}

      - name: Notify deployment
        if: always()
        run: |
          curl -X POST "${{ secrets.WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            -d '{"text":"ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†: ${{ job.status }}"}'
```

##### **GitHub Secretsè¨­å®š**
```
å¿…è¦ãªã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ:
1. CLASP_CREDENTIALS - CLASPã®èªè¨¼æƒ…å ±
2. WEBHOOK_URL - é€šçŸ¥ç”¨Webhookï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
```

##### **ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥ï¼ˆã‚·ãƒ³ãƒ—ãƒ«ç‰ˆï¼‰**
```
main (æœ¬ç•ªç’°å¢ƒ)
  â†‘
  merge after review
  â†‘
feature/* (é–‹ç™ºãƒ–ãƒ©ãƒ³ãƒ)

ãƒ«ãƒ¼ãƒ«:
- feature/*ã§é–‹ç™º
- Pull Requestã§ãƒ¬ãƒ“ãƒ¥ãƒ¼
- mainã¸ã®ãƒãƒ¼ã‚¸ã§è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤
```

**å·¥æ•°**: 3-4æ™‚é–“
**ã‚³ã‚¹ãƒˆ**: ç„¡æ–™ï¼ˆGitHub Actions: æœˆ2,000åˆ†ã¾ã§ç„¡æ–™ï¼‰

---

## ğŸ“Œ P2: æ¨å¥¨ã™ã‚‹èª²é¡Œï¼ˆä½™è£•ãŒã‚ã‚Œã°å¯¾å¿œï¼‰

### 6. ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸å‘ä¸Š

**ç¾çŠ¶**: 21%ï¼ˆ3/14é–¢æ•°ï¼‰
**ç›®æ¨™**: 80%ä»¥ä¸Š

**å®Ÿè£…æ–¹é‡**:
```javascript
// test/main.test.gs ã«è¿½åŠ 

// ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ
function testValidateFormData() {
  // æ­£å¸¸ã‚±ãƒ¼ã‚¹
  const validData = {
    ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹: 'test@example.com',
    äºˆç´„æ–½è¨­: 'ãƒ•ãƒªãƒ¼ãƒãƒƒãƒˆ',
    æ°å: 'ãƒ†ã‚¹ãƒˆå¤ªéƒ',
    é€£çµ¡å…ˆ: '090-1234-5678',
    åˆ©ç”¨é–‹å§‹æ—¥: '2024-12-01',
    åˆ©ç”¨é–‹å§‹æ™‚é–“: '10:00'
  };
  const result = validateFormData(validData);
  assert(result.valid === true, 'ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æˆåŠŸã™ã¹ã');

  // ç•°å¸¸ã‚±ãƒ¼ã‚¹: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ä¸æ­£
  const invalidEmail = { ...validData, ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹: 'invalid-email' };
  const result2 = validateFormData(invalidEmail);
  assert(result2.valid === false, 'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ä¸æ­£ã§å¤±æ•—ã™ã¹ã');
}

// é‡è¤‡ãƒã‚§ãƒƒã‚¯ãƒ†ã‚¹ãƒˆ
function testCheckAvailability() {
  // ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
  // ... å®Ÿè£… ...
}

// ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ä½œæˆãƒ†ã‚¹ãƒˆ
function testCreateCalendarEvent() {
  // ... å®Ÿè£… ...
}
```

**å·¥æ•°**: 8-10æ™‚é–“
**å„ªå…ˆåº¦**: ä½ï¼ˆå‹•ä½œç¢ºèªæ¸ˆã¿ã®æ©Ÿèƒ½ãŒå¤šã„ï¼‰

---

### 7. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

**ç¾çŠ¶ã®èª²é¡Œ**:
- Spreadsheetå…¨ä»¶èª­ã¿è¾¼ã¿ï¼ˆéåŠ¹ç‡ï¼‰
- é‡è¤‡ãƒã‚§ãƒƒã‚¯ã§O(n)ã®ç·šå½¢æ¢ç´¢

**æœ€é©åŒ–æ¡ˆ**:
```javascript
// ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ´»ç”¨
function checkAvailabilityOptimized(facility, startTime) {
  const cache = CacheService.getScriptCache();
  const cacheKey = `availability_${facility}_${startTime.getTime()}`;

  // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒã‚§ãƒƒã‚¯ï¼ˆ5åˆ†é–“æœ‰åŠ¹ï¼‰
  const cached = cache.get(cacheKey);
  if (cached) {
    return JSON.parse(cached);
  }

  // ... å®Ÿéš›ã®ãƒã‚§ãƒƒã‚¯ ...

  cache.put(cacheKey, JSON.stringify(result), 300);
  return result;
}
```

**å·¥æ•°**: 2-3æ™‚é–“
**åŠ¹æœ**: ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ 30-50%çŸ­ç¸®

---

## ğŸ’° ã‚³ã‚¹ãƒˆåˆ†æï¼ˆç„¡æ–™æ å†…é‹ç”¨ï¼‰

### Google ã‚µãƒ¼ãƒ“ã‚¹ç„¡æ–™æ 

| ã‚µãƒ¼ãƒ“ã‚¹ | ç„¡æ–™æ  | æƒ³å®šä½¿ç”¨é‡ | è¶…éãƒªã‚¹ã‚¯ |
|---------|--------|-----------|----------|
| **Google Apps Script** | æ—¥20æ™‚é–“/ãƒ¦ãƒ¼ã‚¶ãƒ¼ | 1æ™‚é–“/æ—¥ | âŒ ãªã— |
| **Google Spreadsheet** | ç„¡åˆ¶é™ | 1ã‚·ãƒ¼ãƒˆ | âŒ ãªã— |
| **Google Calendar** | ç„¡åˆ¶é™ | 1ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ | âŒ ãªã— |
| **Google Drive** | 15GB | <100MB | âŒ ãªã— |
| **Gmailé€ä¿¡** | æ—¥100é€š/ãƒ¦ãƒ¼ã‚¶ãƒ¼ | 5-10é€š/æ—¥ | âŒ ãªã— |

### å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ç„¡æ–™æ 

| ã‚µãƒ¼ãƒ“ã‚¹ | ç„¡æ–™æ  | ç”¨é€” | è¶…éãƒªã‚¹ã‚¯ |
|---------|--------|------|----------|
| **GitHub Pages** | 100GBå¸¯åŸŸå¹…/æœˆ | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | âŒ ãªã— |
| **GitHub Actions** | 2,000åˆ†/æœˆ | CI/CD | âš ï¸ ä½ |
| **reCAPTCHA** | 100ä¸‡ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/æœˆ | Botå¯¾ç­– | âŒ ãªã— |
| **Cloudflare** | ç„¡åˆ¶é™ãƒªã‚¯ã‚¨ã‚¹ãƒˆ | CDNãƒ»DDoSä¿è­· | âŒ ãªã— |
| **UptimeRobot** | 50ãƒ¢ãƒ‹ã‚¿ãƒ¼ | ç›£è¦– | âŒ ãªã— |

### ğŸ“Š æœˆé¡ã‚³ã‚¹ãƒˆè©¦ç®—

```
åŸºæœ¬é‹ç”¨: 0å††
ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆæ¨å¥¨ï¼‰: 0å††
åˆè¨ˆ: 0å††/æœˆ
```

**çµè«–**: å®Œå…¨ç„¡æ–™ã§ã®é‹ç”¨ãŒå¯èƒ½

---

## ğŸ—“ï¸ å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### ãƒ•ã‚§ãƒ¼ã‚º1: æœ€å°é™ã®æœ¬ç•ªé‹ç”¨æº–å‚™ï¼ˆ2é€±é–“ï¼‰

#### Week 1: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–
```
Day 1-2: reCAPTCHA v3 å®Ÿè£…ï¼ˆ2-3hï¼‰
Day 3-4: ãƒ¬ãƒ¼ãƒˆåˆ¶é™å®Ÿè£…ï¼ˆ2-3hï¼‰
Day 5: Cloudflareè¨­å®šï¼ˆ1-2hï¼‰
Day 6: ç§˜å¯†æƒ…å ±ä¿è­·ï¼ˆ1hï¼‰
Day 7: ãƒ†ã‚¹ãƒˆãƒ»æ¤œè¨¼ï¼ˆ2hï¼‰

åˆè¨ˆ: 8-11æ™‚é–“
```

#### Week 2: ç®¡ç†ç”»é¢ï¼‹ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
```
Day 8-10: ç®¡ç†ç”»é¢å®Ÿè£…ï¼ˆ6-8hï¼‰
Day 11-12: è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å®Ÿè£…ï¼ˆ2-3hï¼‰
Day 13: çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆ2hï¼‰
Day 14: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆãƒ»å¼•ç¶™ãï¼ˆ2hï¼‰

åˆè¨ˆ: 12-15æ™‚é–“
```

**Week 2çµ‚äº†æ™‚ç‚¹ã§ãƒ™ãƒ¼ã‚¿é‹ç”¨é–‹å§‹å¯èƒ½**

---

### ãƒ•ã‚§ãƒ¼ã‚º2: ç›£è¦–ãƒ»è‡ªå‹•åŒ–ï¼ˆ+1é€±é–“ã€ä»»æ„ï¼‰

```
Day 15-16: ã‚¨ãƒ©ãƒ¼ç›£è¦–å®Ÿè£…ï¼ˆ4-6hï¼‰
Day 17-18: ãƒ‡ãƒ—ãƒ­ã‚¤è‡ªå‹•åŒ–ï¼ˆ3-4hï¼‰
Day 19: ãƒ†ã‚¹ãƒˆãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆ2hï¼‰

åˆè¨ˆ: 9-12æ™‚é–“
```

---

### ãƒ•ã‚§ãƒ¼ã‚º3: å“è³ªå‘ä¸Šï¼ˆä½™è£•ãŒã‚ã‚Œã°ï¼‰

```
ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸å‘ä¸Š: 8-10h
ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–: 2-3h
```

---

## ğŸ“š éæŠ€è¡“è€…å‘ã‘ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆåˆ¥é€”ä½œæˆï¼‰

ä»¥ä¸‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š

### 1. ç®¡ç†è€…å‘ã‘ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆã‚¬ã‚¤ãƒ‰
```
- ç®¡ç†ç”»é¢ã®ä½¿ã„æ–¹
- äºˆç´„ç¢ºèªæ–¹æ³•
- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å®Ÿè¡Œæ–¹æ³•
- ç·Šæ€¥æ™‚ã®é€£çµ¡å…ˆ
```

### 2. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ã‚¨ãƒ©ãƒ¼ç¨®åˆ¥â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
          â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚1. äºˆç´„ã§ããªã„â”‚ â†’ [æ‰‹é †A]
    â”‚2. ã‚·ã‚¹ãƒ†ãƒ ãŒé–‹ã‘ãªã„â”‚ â†’ [æ‰‹é †B]
    â”‚3. ãƒ‡ãƒ¼ã‚¿ãŒæ¶ˆãˆãŸâ”‚ â†’ [æ‰‹é †Cï¼ˆãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©å…ƒï¼‰]
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. é€±æ¬¡ãƒ»æœˆæ¬¡ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
```
ã€é€±æ¬¡ã€‘
â–¡ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã‚‹ã‹ç¢ºèª
â–¡ ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’ç¢ºèª
â–¡ äºˆç´„ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

ã€æœˆæ¬¡ã€‘
â–¡ ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒç‡ãƒ¬ãƒãƒ¼ãƒˆç¢ºèª
â–¡ ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä½¿ç”¨é‡ç¢ºèª
â–¡ æ”¹å–„è¦æœ›ã®æ•´ç†
```

---

## ğŸ¯ æ„æ€æ±ºå®šãƒãƒˆãƒªãƒƒã‚¯ã‚¹

### æœ€å°é™ã§æœ¬ç•ªé‹ç”¨ã—ãŸã„å ´åˆ

```
å¿…é ˆé …ç›®ã®ã¿å®Ÿè£…:
âœ… P0-1: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ï¼ˆ8-11hï¼‰
âœ… P0-2: ç®¡ç†ç”»é¢ï¼ˆ6-8hï¼‰
âœ… P0-3: è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼ˆ2-3hï¼‰

åˆè¨ˆ: 16-22æ™‚é–“ï¼ˆ2-3é€±é–“ï¼‰
ãƒªã‚¹ã‚¯: ä¸­ï¼ˆã‚¨ãƒ©ãƒ¼æ¤œçŸ¥ãŒæ‰‹å‹•ï¼‰
```

### æ¨å¥¨æ§‹æˆã§é‹ç”¨ã—ãŸã„å ´åˆ

```
P0å…¨ã¦ + P1ã‚’å®Ÿè£…:
âœ… P0å…¨ã¦ï¼ˆ16-22hï¼‰
âœ… P1-4: ã‚¨ãƒ©ãƒ¼ç›£è¦–ï¼ˆ4-6hï¼‰
âœ… P1-5: ãƒ‡ãƒ—ãƒ­ã‚¤è‡ªå‹•åŒ–ï¼ˆ3-4hï¼‰

åˆè¨ˆ: 23-32æ™‚é–“ï¼ˆ3-4é€±é–“ï¼‰
ãƒªã‚¹ã‚¯: ä½ï¼ˆæœ¬æ ¼é‹ç”¨å¯èƒ½ï¼‰
```

---

## âš ï¸ ãƒªã‚¹ã‚¯ã¨åˆ¶ç´„äº‹é …

### æŠ€è¡“çš„åˆ¶ç´„

1. **Google Apps Script ã®å®Ÿè¡Œæ™‚é–“åˆ¶é™**
   - æœ€å¤§6åˆ†/å®Ÿè¡Œ
   - å½±éŸ¿: å¤§é‡äºˆç´„ã®ä¸€æ‹¬å‡¦ç†ä¸å¯
   - å¯¾ç­–: ç¾çŠ¶ã®äºˆç´„æ•°ã§ã¯å•é¡Œãªã—

2. **Spreadsheet ã®è¡Œæ•°åˆ¶é™**
   - æœ€å¤§500ä¸‡ã‚»ãƒ«
   - å½±éŸ¿: æ•°ä¸‡ä»¶ã®äºˆç´„ãƒ‡ãƒ¼ã‚¿ã¾ã§å¯¾å¿œå¯èƒ½
   - å¯¾ç­–: å¹´æ¬¡ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã§å¯¾å¿œ

3. **GitHub Pages ã®åˆ¶é™**
   - ãƒªãƒã‚¸ãƒˆãƒªã‚µã‚¤ã‚º1GB
   - æœˆé–“å¸¯åŸŸå¹…100GB
   - å½±éŸ¿: ç¾çŠ¶ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã§ã¯å•é¡Œãªã—

### é‹ç”¨ä¸Šã®ãƒªã‚¹ã‚¯

1. **ç®¡ç†è€…ã®æŠ€è¡“ã‚¹ã‚­ãƒ«**
   - ãƒªã‚¹ã‚¯: ãƒˆãƒ©ãƒ–ãƒ«æ™‚ã«å¯¾å¿œã§ããªã„å¯èƒ½æ€§
   - å¯¾ç­–: è©³ç´°ãªæ‰‹é †æ›¸ãƒ»ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆä½œæˆ
   - ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å…ˆï¼ˆãƒ—ãƒ­ãƒœãƒã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ï¼‰ã®æ˜ç¢ºåŒ–

2. **ãƒ—ãƒ­ãƒœãƒã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®å¯¾å¿œå¯èƒ½æ€§**
   - ãƒªã‚¹ã‚¯: ç·Šæ€¥æ™‚ã«é€£çµ¡ãŒå–ã‚Œãªã„
   - å¯¾ç­–:
     - è¤‡æ•°åã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã«
     - è‡ªå‹•å¾©æ—§æ©Ÿèƒ½ã®å……å®Ÿ
     - éšœå®³æ™‚ã¯ä»£æ›¿æ¥­å‹™ï¼ˆé›»è©±äºˆç´„ç­‰ï¼‰

3. **Google ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä¾å­˜**
   - ãƒªã‚¹ã‚¯: ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåœæ­¢ãƒ»å‰Šé™¤
   - å¯¾ç­–:
     - çµ„ç¹”ç”¨Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½¿ç”¨
     - å®šæœŸçš„ãªãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
     - ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¯åˆ¥ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ã‚‚ä¿å­˜

---

## ğŸ“ æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ 

### å³åº§ã«å®Ÿæ–½ã™ã¹ãã“ã¨

1. **[15åˆ†] ç¾çŠ¶ç¢ºèª**
   - [ ] æœ¬ç•ªç”¨Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ç¢ºèª
   - [ ] ç®¡ç†è€…ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®æ±ºå®š
   - [ ] ãƒ—ãƒ­ãƒœãƒã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®é€£çµ¡å…ˆæ•´ç†

2. **[30åˆ†] å„ªå…ˆé †ä½ã®æ±ºå®š**
   - [ ] æœ€å°æ§‹æˆ vs æ¨å¥¨æ§‹æˆã®é¸æŠ
   - [ ] æœ¬ç•ªé‹ç”¨é–‹å§‹å¸Œæœ›æ—¥ã®è¨­å®š
   - [ ] äºˆç®—ã®æœ€çµ‚ç¢ºèªï¼ˆæœ¬å½“ã«0å††ã§ã„ã‘ã‚‹ã‹ï¼‰

3. **[1æ™‚é–“] å®Ÿè£…è¨ˆç”»ã®ç­–å®š**
   - [ ] ãƒ—ãƒ­ãƒœãƒã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ç¨¼åƒå¯èƒ½æ™‚é–“ç¢ºèª
   - [ ] ãƒ•ã‚§ãƒ¼ã‚º1ã®è©³ç´°ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ä½œæˆ
   - [ ] é–‹ç™ºç’°å¢ƒã®æº–å‚™

---

## ğŸ’¡ è¿½åŠ ã®æ¨å¥¨äº‹é …

### ã‚½ãƒ•ãƒˆãƒ­ãƒ¼ãƒ³ãƒæˆ¦ç•¥

æœ¬ç•ªé‹ç”¨é–‹å§‹å‰ã«ä»¥ä¸‹ã‚’æ¨å¥¨ï¼š

```
Phase 0: ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ™ãƒ¼ã‚¿ï¼ˆ1é€±é–“ï¼‰
- å¯¾è±¡: ã‚¹ã‚¿ãƒƒãƒ•ãƒ»è¦ªã—ã„ä¼šå“¡ã®ã¿
- ç›®çš„: å®Ÿä½¿ç”¨ã§ã®å•é¡Œç™ºè¦‹
- è¦æ¨¡: 10-20åç¨‹åº¦

Phase 1: ã‚ªãƒ¼ãƒ—ãƒ³ãƒ™ãƒ¼ã‚¿ï¼ˆ2é€±é–“ï¼‰
- å¯¾è±¡: å…¨ä¼šå“¡
- ä¸¦è¡Œé‹ç”¨: å¾“æ¥ã®äºˆç´„æ–¹æ³•ã‚‚ä½µç”¨
- ç›®çš„: ç§»è¡Œã®å††æ»‘åŒ–

Phase 2: æœ¬æ ¼é‹ç”¨
- å¾“æ¥ã®äºˆç´„æ–¹æ³•ã‚’æ®µéšçš„ã«å»ƒæ­¢
```

### ä¼šå“¡å‘ã‘ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³

```
ã€å‘ŠçŸ¥å†…å®¹ã€‘
- æ–°ã—ã„äºˆç´„ã‚·ã‚¹ãƒ†ãƒ å°å…¥ã®èƒŒæ™¯
- ä½¿ã„æ–¹ã®èª¬æ˜ï¼ˆå‹•ç”»æ¨å¥¨ï¼‰
- ãƒˆãƒ©ãƒ–ãƒ«æ™‚ã®é€£çµ¡å…ˆ
- ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®å‹Ÿé›†

ã€ãƒãƒ£ãƒãƒ«ã€‘
- æ–½è¨­å†…æ²ç¤º
- ãƒ¡ãƒ¼ãƒ«é…ä¿¡
- LINEï¼ˆä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆï¼‰
```

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆä½“åˆ¶

### ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ãƒ­ãƒ¼

```
Level 1: ç®¡ç†è€…ï¼ˆãƒ“ã‚¸ãƒã‚¹ã‚ªãƒ¼ãƒŠãƒ¼ï¼‰
â†“ å¯¾å¿œä¸å¯ã®å ´åˆ
Level 2: ãƒ—ãƒ­ãƒœãƒã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ï¼ˆçŸ­æ™‚é–“å¯¾å¿œï¼‰
â†“ å¯¾å¿œä¸å¯ã®å ´åˆ
Level 3: é–‹ç™ºå…ƒã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ï¼ˆæœ‰å„Ÿå¯¾å¿œï¼‰
```

### å¯¾å¿œæ™‚é–“ã®ç›®å®‰

| å•é¡Œãƒ¬ãƒ™ãƒ« | å¯¾å¿œæ™‚é–“ | æ‹…å½“ |
|-----------|---------|------|
| è»½å¾®ï¼ˆäºˆç´„ç¢ºèªç­‰ï¼‰ | å³æ™‚ | ç®¡ç†è€… |
| ä¸­ç¨‹åº¦ï¼ˆã‚¨ãƒ©ãƒ¼ç™ºç”Ÿï¼‰ | 24æ™‚é–“ä»¥å†… | ãƒ—ãƒ­ãƒœãƒE |
| é‡å¤§ï¼ˆã‚·ã‚¹ãƒ†ãƒ åœæ­¢ï¼‰ | 4æ™‚é–“ä»¥å†… | ãƒ—ãƒ­ãƒœãƒE + ä»£æ›¿æ¥­å‹™ |

---

## çµè«–

### âœ… æœ¬ç•ªé‹ç”¨ã¯å¯èƒ½

å‰ææ¡ä»¶ï¼ˆç„¡æ–™ãƒ»ãƒ™ã‚¹ãƒˆã‚¨ãƒ•ã‚©ãƒ¼ãƒˆãƒ»éæŠ€è¡“è€…ç®¡ç†ï¼‰ã®ä¸‹ã§ã€
ä»¥ä¸‹ã‚’æº€ãŸã›ã°æœ¬ç•ªé‹ç”¨å¯èƒ½ï¼š

1. **P0èª²é¡Œã‚’å…¨ã¦è§£æ±º**ï¼ˆ16-22æ™‚é–“ï¼‰
2. **éæŠ€è¡“è€…å‘ã‘ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™**
3. **ã‚½ãƒ•ãƒˆãƒ­ãƒ¼ãƒ³ãƒã§æ¤œè¨¼**

### ğŸ¯ æ¨å¥¨ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

```
1. ãƒ•ã‚§ãƒ¼ã‚º1ã‚’2é€±é–“ã§å®Œäº†ï¼ˆP0ã®ã¿ï¼‰
2. ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ™ãƒ¼ã‚¿ã§1é€±é–“æ¤œè¨¼
3. å•é¡Œãªã‘ã‚Œã°ã‚ªãƒ¼ãƒ—ãƒ³ãƒ™ãƒ¼ã‚¿é–‹å§‹
4. ä½™è£•ãŒã§ããŸã‚‰P1èª²é¡Œã«ç€æ‰‹
```

### ğŸ’ª æˆåŠŸã®éµ

- ãƒ—ãƒ­ãƒœãƒã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ç¶™ç¶šçš„ãªçŸ­æ™‚é–“ã‚µãƒãƒ¼ãƒˆ
- ç®¡ç†è€…ã®å­¦ç¿’æ„æ¬²
- ä¼šå“¡ã‹ã‚‰ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åé›†
- æ®µéšçš„ãªæ”¹å–„ã‚µã‚¤ã‚¯ãƒ«

**æœˆé¡0å††ã§å®‰å®šé‹ç”¨ã§ãã‚‹ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰å¯èƒ½ã§ã™ï¼**
