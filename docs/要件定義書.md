# Tri-force Koenji施設予約システム 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
Tri-force Koenji施設予約システム

### 1.2 プロジェクトの目的
- 施設の効率的な予約管理の実現
- 利用者の利便性向上
- 管理業務の自動化・効率化
- 予約データの一元管理

### 1.3 プロジェクトの背景
- 従来の手動予約管理の課題解決
- 重複予約の防止
- 予約状況の可視化
- 利用者アクセスの向上

## 2. システム概要

### 2.1 システムの目的
施設予約を効率的に管理し、利用者が簡単に予約を取れるWebベースのシステムを提供する。

### 2.2 システムの範囲
- 予約フォームの提供
- 予約データの管理
- カレンダー連携
- 重複チェック機能
- エラーハンドリング

### 2.3 対象ユーザー
- **主要ユーザー**: ジム会員（認証不要）
- **管理者**: ジム管理者（スプレッドシート管理）
- **想定利用者数**: 月間100-200名（小規模ジム）

## 3. 機能要件

### 3.1 基本機能

#### 3.1.1 予約登録機能
- **機能概要**: 利用者が施設の予約を登録できる
- **入力項目**:
  - 利用者名（必須）
  - メールアドレス（必須）
  - 利用日（必須）
  - 利用時間（必須）
  - 施設名（必須）
  - 利用目的（必須）
  - 参加人数（必須）
  - 備考（任意）

#### 3.1.2 重複チェック機能
- **機能概要**: 既存予約との重複を防止
- **チェック項目**:
  - 同一日時・同一施設の予約有無
  - 施設定員の確認
  - 利用可能時間の確認

#### 3.1.3 データ保存機能
- **機能概要**: 予約データをスプレッドシートに保存
- **保存項目**:
  - 予約ID（自動生成）
  - 利用者情報
  - 予約詳細
  - 登録日時
  - ステータス

#### 3.1.4 カレンダー連携機能
- **機能概要**: Googleカレンダーに予約を登録
- **連携内容**:
  - 予約イベントの作成
  - 利用者への通知
  - 予約変更時の更新

#### 3.1.5 確認機能
- **機能概要**: 予約完了の確認表示
- **確認内容**:
  - 予約詳細の表示
  - 予約ID の発行
  - 利用案内の表示

### 3.2 管理機能

#### 3.2.1 予約データ管理
- **機能概要**: 予約データの一覧・検索・編集
- **管理項目**:
  - 予約一覧の表示
  - 予約状況の確認
  - 予約データの修正
  - 予約の削除

#### 3.2.2 統計・レポート機能
- **機能概要**: 予約状況の分析・レポート生成
- **統計項目**:
  - 施設利用状況
  - 利用者統計
  - 時間帯別利用率
  - 月次レポート

### 3.3 将来拡張機能

#### 3.3.1 予約変更・キャンセル機能
- 利用者による予約変更
- 予約のキャンセル
- キャンセル理由の記録

#### 3.3.2 承認フロー機能
- 予約の事前承認
- 承認者の設定
- 承認ステータス管理

#### 3.3.3 通知機能
- 予約確認メール
- リマインダー通知
- 管理者への通知

## 4. 非機能要件

### 4.1 性能要件
- **応答時間**: 通常操作で3秒以内
- **同時接続数**: 最大50ユーザー
- **データ処理量**: 月間500件の予約処理
- **可用性**: 99.5%以上

### 4.2 セキュリティ要件
- **認証**: 認証不要（簡易的なサイト）
- **データ保護**: 個人情報の適切な管理
- **アクセス制御**: 管理者による事後確認
- **監査**: 操作ログの記録（必要に応じて）

### 4.3 利用性要件
- **使いやすさ**: 直感的なUI/UX
- **アクセシビリティ**: モバイル対応
- **多言語対応**: 日本語対応
- **ブラウザ対応**: Chrome, Firefox, Safari, Edge

### 4.4 保守性要件
- **拡張性**: 新機能の追加容易性
- **保守性**: コードの可読性・保守性
- **ドキュメント**: 充実したドキュメント
- **バックアップ**: データの定期バックアップ

## 5. 技術要件

### 5.1 開発環境

#### 5.1.1 プラットフォーム
- **実行環境**: Google Apps Script (GAS)
- **エディタ**: Apps Script エディタ
- **バージョン管理**: clasp + Git

#### 5.1.2 使用技術
- **バックエンド**: JavaScript (V8 Runtime)
- **フロントエンド**: HTML5, CSS3, JavaScript
- **UI Framework**: Materialize CSS
- **データストレージ**: Google Spreadsheet
- **API**: Google Calendar API, Gmail API

### 5.2 外部サービス連携

#### 5.2.1 Google サービス
- **Google Spreadsheet**: データ管理
- **Google Calendar**: スケジュール管理
- **Gmail**: メール送信
- **Google Drive**: ファイル管理

#### 5.2.2 外部API
- 現在は利用なし（将来的に検討）

### 5.3 データ要件

#### 5.3.1 データモデル
```
予約データ (Reservation)
├── 予約ID (id)
├── 利用者名 (name)
├── メールアドレス (email)
├── 利用日 (date)
├── 利用時間 (time)
├── 施設名 (facility)
├── 利用目的 (purpose)
├── 参加人数 (participants)
├── 備考 (remarks)
├── 登録日時 (createdAt)
└── ステータス (status)
```

#### 5.3.2 データ制約
- 予約ID: 一意性保証
- メールアドレス: 形式チェック
- 利用日: 未来日のみ
- 利用時間: 営業時間内
- 参加人数: 施設定員以内

## 6. 制約事項

### 6.1 技術的制約

#### 6.1.1 Google Apps Script制約
- **実行時間**: 最大6分（通常は30秒）
- **メモリ**: 制限あり
- **API呼び出し**: 1日あたりのクォータ制限
- **同時実行**: 制限あり

#### 6.1.2 Google Spreadsheet制約
- **セル数**: 最大500万セル
- **行数**: 最大200万行
- **同時編集**: 制限あり
- **データサイズ**: 制限あり

### 6.2 運用制約

#### 6.2.1 Googleアカウント制約
- **複数アカウント**: 複数ログイン時のアクセス問題
- **権限管理**: Google アカウントベース
- **データ移行**: Googleサービス依存

#### 6.2.2 費用制約
- **Google Workspace**: 無料枠での運用
- **追加サービス**: 有料プラン検討必要
- **拡張機能**: 開発工数の制約

### 6.3 法的制約

#### 6.3.1 個人情報保護
- **個人情報取扱い**: 適切な管理・保護
- **データ保存期間**: 必要最小限
- **第三者提供**: 原則禁止
- **本人同意**: 利用目的の明示

## 7. 運用要件

### 7.1 運用体制
- **システム管理者**: 1名
- **運用担当者**: 1-2名
- **サポート体制**: 平日対応

### 7.2 運用手順
- **日常運用**: 予約確認、問い合わせ対応
- **定期運用**: データバックアップ、統計作成
- **障害対応**: 問題発生時の対応手順

### 7.3 保守・更新
- **定期更新**: 機能改善、バグ修正
- **セキュリティ更新**: 脆弱性対応
- **データ保守**: 古いデータの整理

## 8. 成功基準

### 8.1 定量的指標
- **利用者数**: 月間100名以上
- **予約件数**: 月間200件以上
- **システム稼働率**: 99.5%以上
- **応答時間**: 3秒以内

### 8.2 定性的指標
- **利用者満足度**: 良好な評価
- **管理効率**: 業務時間の短縮
- **データ品質**: 正確な予約管理
- **システム安定性**: 安定した運用

## 9. リスク管理

### 9.1 技術リスク
- **Google サービス障害**: 代替手段の検討
- **スクリプト実行制限**: 処理の最適化
- **データ消失**: バックアップ体制強化
- **セキュリティ脆弱性**: 定期的なセキュリティ監査

### 9.2 運用リスク
- **人的リソース不足**: 運用体制の見直し
- **利用者増加**: スケーラビリティの検討
- **要求変更**: 柔軟な対応体制
- **法的対応**: コンプライアンス遵守

### 9.3 ビジネスリスク
- **利用者離れ**: ユーザビリティ向上
- **競合サービス**: 差別化要因の強化
- **コスト増**: 運用コストの最適化
- **法規制変更**: 対応体制の整備

## 10. 移行・展開計画

### 10.1 段階的展開
1. **フェーズ1**: 基本機能の実装・テスト
2. **フェーズ2**: 本格運用開始
3. **フェーズ3**: 機能拡張・改善

### 10.2 移行手順
- **データ移行**: 既存データの移行
- **利用者教育**: 操作方法の説明
- **並行運用**: 旧システムとの併用期間
- **本格移行**: 完全移行

### 10.3 将来展開
- **GitHub Pages移行**: HTMLのみの移行による公開方式の変更
- **バックエンド継続**: GASバックエンドは変更なし
- **モバイル対応**: レスポンシブデザインの強化
- **管理機能**: 会員確認機能の追加

---

**承認者**: プロジェクトマネージャー
**作成日**: 2024年12月
**バージョン**: 1.0
**次回見直し**: 2025年6月
